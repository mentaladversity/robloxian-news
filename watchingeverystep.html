<!DOCTYPE html>
<html>
<head>
    <title>WE SEE YOU</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #000000;
            overflow: hidden;
            cursor: none;
        }

        .scene {
            width: 100vw;
            height: 100vh;
            perspective: 2000px;
            animation: ambientMovement 20s infinite ease-in-out;
        }

        .eyes-container {
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            position: relative;
        }

        .eye-pair {
            position: absolute;
            display: flex;
            gap: 10px;
            opacity: 0;
            cursor: none;
            transform-style: preserve-3d;
            filter: drop-shadow(0 0 10px rgba(255, 0, 0, 0.3));
            transition: all 0.3s ease-in-out;
            animation: spawnFlicker 1s ease-in forwards;
        }

        .eye {
            width: 8px;
            height: 12px;
            background: #ffffff;
            border-radius: 50%;
            position: relative;
            transform-style: preserve-3d;
            box-shadow: 
                0 0 10px #fff,
                0 0 20px #fff,
                0 0 30px #ff0000,
                0 0 40px #ff0000;
        }

        .eye::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: black;
            border-radius: 50%;
            transform-origin: 50% 0;
        }

        .eye::after {
            content: '';
            position: absolute;
            width: 40%;
            height: 40%;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            top: 20%;
            left: 20%;
            filter: blur(1px);
        }

        .cursor {
            width: 20px;
            height: 20px;
            border: 2px solid white;
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            transition: all 0.2s ease;
            mix-blend-mode: difference;
        }

        .cursor.hover {
            transform: scale(1.5);
            background: rgba(255, 0, 0, 0.2);
            border-color: red;
        }

        @keyframes spawnFlicker {
            0% { opacity: 0; transform: scale(0.1); }
            20% { opacity: 0.8; transform: scale(1.2); }
            40% { opacity: 0.2; transform: scale(0.9); }
            60% { opacity: 1; transform: scale(1.1); }
            80% { opacity: 0.5; transform: scale(0.95); }
            100% { opacity: 1; transform: scale(1); }
        }

        @keyframes blink {
            0%, 48%, 52%, 100% { transform: scaleY(0); }
            50% { transform: scaleY(1); }
        }

        @keyframes shake {
            0% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(-3px, 3px) rotate(-2deg); }
            50% { transform: translate(3px, -3px) rotate(2deg); }
            75% { transform: translate(-3px, -3px) rotate(-1deg); }
            100% { transform: translate(0, 0) rotate(0deg); }
        }

        @keyframes ambientMovement {
            0% { transform: rotate3d(1, 0, 0, 0deg); }
            25% { transform: rotate3d(1, 1, 0, 3deg); }
            50% { transform: rotate3d(0, 1, 1, -3deg); }
            75% { transform: rotate3d(-1, 0, 1, 3deg); }
            100% { transform: rotate3d(1, 0, 0, 0deg); }
        }

        .eye-pair:hover {
            animation: shake 0.1s ease-in-out infinite;
            filter: drop-shadow(0 0 20px rgba(255, 0, 0, 0.6));
        }

        .eye-pair.active .eye {
            background: #ff0000;
        }
    </style>
</head>
<body>
    <div class="cursor" id="cursor"></div>
    <div class="scene">
        <div class="eyes-container" id="eyesContainer"></div>
    </div>

    <script>
        const MIN_DISTANCE = 60; // Minimum distance between eye pairs

        function distance(x1, y1, x2, y2) {
            return Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2));
        }

        function getRandomPosition(existingPositions) {
            let attempts = 0;
            const maxAttempts = 50;
            
            while (attempts < maxAttempts) {
                const x = 10 + Math.random() * 80;
                const y = 10 + Math.random() * 80;
                const z = -300 + Math.random() * 600;
                
                // Check distance from all existing positions
                let tooClose = false;
                for (const pos of existingPositions) {
                    const dist = distance(x, y, pos.x, pos.y);
                    if (dist < MIN_DISTANCE) {
                        tooClose = true;
                        break;
                    }
                }
                
                if (!tooClose || attempts === maxAttempts - 1) {
                    return {
                        x, y, z,
                        delay: Math.random() * 2,
                        scale: 0.8 + Math.random() * 0.4
                    };
                }
                
                attempts++;
            }
        }

        function startIndependentBlinking(eye) {
            const minInterval = 2000;
            const maxInterval = 8000;
            
            function blink() {
                eye.style.animation = 'blink 0.2s ease-in-out';
                eye.addEventListener('animationend', () => {
                    eye.style.animation = '';
                    // Schedule next blink
                    setTimeout(blink, minInterval + Math.random() * (maxInterval - minInterval));
                }, { once: true });
            }
            
            // Start first blink after random delay
            setTimeout(blink, Math.random() * maxInterval);
        }

        function createEyePair(position) {
            const eyePair = document.createElement('div');
            eyePair.className = 'eye-pair';
            eyePair.style.left = `${position.x}%`;
            eyePair.style.top = `${position.y}%`;
            eyePair.style.transform = `translateZ(${position.z}px) scale(${position.scale})`;
            eyePair.style.animationDelay = `${position.delay}s`;
            
            // Create eyes with independent blinking
            const eye1 = document.createElement('div');
            const eye2 = document.createElement('div');
            eye1.className = 'eye';
            eye2.className = 'eye';
            
            eyePair.appendChild(eye1);
            eyePair.appendChild(eye2);

            // Start independent blinking for each eye
            startIndependentBlinking(eye1);
            startIndependentBlinking(eye2);

            // Add mouse interaction effects
            eyePair.addEventListener('mouseenter', () => {
                cursor.classList.add('hover');
                eyePair.classList.add('active');
            });

            eyePair.addEventListener('mouseleave', () => {
                cursor.classList.remove('hover');
                eyePair.classList.remove('active');
            });

            return eyePair;
        }

        function initScene() {
            const container = document.getElementById('eyesContainer');
            const cursor = document.getElementById('cursor');
            const numEyes = 15; // Reduced number of initial eyes
            const existingPositions = [];

            // Create initial eye pairs with spacing
            for (let i = 0; i < numEyes; i++) {
                const position = getRandomPosition(existingPositions);
                existingPositions.push(position);
                const eyePair = createEyePair(position);
                container.appendChild(eyePair);
            }

            // Handle cursor movement
            document.addEventListener('mousemove', (e) => {
                cursor.style.left = e.clientX + 'px';
                cursor.style.top = e.clientY + 'px';

                // Make eyes follow cursor
                const eyes = document.querySelectorAll('.eye-pair');
                eyes.forEach(eyePair => {
                    const rect = eyePair.getBoundingClientRect();
                    const eyeCenterX = rect.left + rect.width / 2;
                    const eyeCenterY = rect.top + rect.height / 2;
                    
                    const angle = Math.atan2(e.clientY - eyeCenterY, e.clientX - eyeCenterX);
                    const rotation = angle * (180 / Math.PI);
                    
                    eyePair.style.transform += ` rotate(${rotation}deg)`;
                });
            });

            // Occasionally add new eyes with proper spacing
            setInterval(() => {
                if (container.children.length < 25) {
                    const position = getRandomPosition(existingPositions);
                    if (position) {
                        existingPositions.push(position);
                        const eyePair = createEyePair(position);
                        container.appendChild(eyePair);
                    }
                }
            }, 5000);
        }

        document.addEventListener('DOMContentLoaded', initScene);
    </script>
</body>
</html>
