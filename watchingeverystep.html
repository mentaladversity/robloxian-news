<!DOCTYPE html>
<html>
<head>
    <title>WE SEE YOU</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #000000;
            overflow: hidden;
            cursor: none;
            transition: background-color 1s ease;
        }

        body.lit {
            background-color: #ffffff;
        }

        .room {
            position: fixed;
            inset: 0;
            perspective: 2000px;
            transition: all 1s ease;
            transform-style: preserve-3d;
        }

        .wall {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            opacity: 0;
            transition: all 1s ease;
            transform-style: preserve-3d;
        }

        .room.lit .wall {
            opacity: 1;
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .wall.front { 
            width: 100%; 
            height: 100%;
            transform: translateZ(-500px);
        }
        
        .wall.back { 
            width: 100%; 
            height: 100%;
            transform: translateZ(500px);
        }
        
        .wall.left { 
            width: 1000px; 
            height: 100%;
            transform: rotateY(90deg) translateZ(-500px);
        }
        
        .wall.right { 
            width: 1000px; 
            height: 100%;
            transform: rotateY(-90deg) translateZ(-500px);
        }
        
        .wall.top { 
            width: 100%; 
            height: 1000px;
            transform: rotateX(-90deg) translateZ(-500px);
        }
        
        .wall.bottom { 
            width: 100%; 
            height: 1000px;
            transform: rotateX(90deg) translateZ(-500px);
        }

        .lightbulb {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            cursor: pointer;
            z-index: 10000;
            transition: all 0.3s ease;
        }

        .lightbulb svg {
            width: 100%;
            height: 100%;
            transition: all 0.3s ease;
        }

        .lightbulb .bulb {
            fill: #ffffff;
        }

        .lightbulb .rays {
            fill: #ffffff;
        }

        .lightbulb.lit .bulb,
        .lightbulb.lit .rays {
            fill: #000000;
        }

        .lightbulb:hover {
            transform: translate(-50%, -50%) scale(1.1);
        }

        @keyframes rapidFlicker {
            0% { opacity: 1; transform: scale(1); }
            25% { opacity: 0.3; transform: scale(0.95); }
            50% { opacity: 0.8; transform: scale(1.05); }
            75% { opacity: 0.2; transform: scale(0.98); }
            100% { opacity: 1; transform: scale(1); }
        }

        .scene {
            width: 100vw;
            height: 100vh;
            perspective: 2000px;
            animation: ambientMovement 20s infinite ease-in-out;
            opacity: 1;
            transition: opacity 0.5s ease;
            position: relative;
            z-index: 1;
        }

        .scene.hidden {
            opacity: 0;
        }

        .eyes-container {
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            position: relative;
        }

        .eye-pair {
            position: absolute;
            display: flex;
            gap: 10px;
            opacity: 0;
            cursor: none;
            transform-style: preserve-3d;
            filter: drop-shadow(0 0 10px rgba(255, 0, 0, 0.3));
            transition: all 0.3s ease-in-out;
            animation: spawnFlicker 1s ease-in forwards;
        }

        .eye {
            width: 8px;
            height: 12px;
            background: #ffffff;
            border-radius: 50%;
            position: relative;
            transform-style: preserve-3d;
            box-shadow: 
                0 0 10px #fff,
                0 0 20px #fff,
                0 0 30px #ff0000,
                0 0 40px #ff0000;
            transition: all 0.3s ease;
        }

        .eye::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: black;
            border-radius: 50%;
            transform-origin: 50% 0;
            top: 0;
            left: 0;
            transform: scaleY(0);
        }

        .eye-pair:hover .eye {
            animation: rapidFlicker 0.1s infinite;
        }

        .cursor {
            width: 20px;
            height: 20px;
            border: 2px solid white;
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            transition: all 0.2s ease;
            mix-blend-mode: difference;
        }

        .cursor.hover {
            transform: scale(1.5);
            background: rgba(255, 0, 0, 0.2);
            border-color: red;
        }

        @keyframes spawnFlicker {
            0% { opacity: 0; transform: scale(0.1); }
            20% { opacity: 0.8; transform: scale(1.2); }
            40% { opacity: 0.2; transform: scale(0.9); }
            60% { opacity: 1; transform: scale(1.1); }
            80% { opacity: 0.5; transform: scale(0.95); }
            100% { opacity: 1; transform: scale(1); }
        }

        @keyframes blinkEyelid {
            0% { transform: scaleY(0); }
            45% { transform: scaleY(0); }
            50% { transform: scaleY(1); }
            55% { transform: scaleY(0); }
            100% { transform: scaleY(0); }
        }

        @keyframes ambientMovement {
            0% { transform: rotate3d(1, 0, 0, 0deg); }
            25% { transform: rotate3d(1, 1, 0, 3deg); }
            50% { transform: rotate3d(0, 1, 1, -3deg); }
            75% { transform: rotate3d(-1, 0, 1, 3deg); }
            100% { transform: rotate3d(1, 0, 0, 0deg); }
        }

        .eye.blinking::before {
            animation: blinkEyelid 0.2s ease-in-out forwards;
        }
    </style>
</head>
<body>
    <div class="room">
        <div class="wall front"></div>
        <div class="wall back"></div>
        <div class="wall left"></div>
        <div class="wall right"></div>
        <div class="wall top"></div>
        <div class="wall bottom"></div>
    </div>

    <div class="lightbulb" id="lightSwitch">
        <svg viewBox="0 0 100 100">
            <g class="bulb-group">
                <!-- String -->
                <line x1="50" y1="0" x2="50" y2="20" stroke="currentColor" stroke-width="2"/>
                <!-- Bulb -->
                <path class="bulb" d="M35 20 C35 10, 65 10, 65 20 L65 40 C65 45, 35 45, 35 40 Z"/>
                <!-- Base -->
                <path class="bulb" d="M40 40 L60 40 L58 45 L42 45 Z"/>
                <!-- Rays -->
                <g class="rays">
                    <polygon points="50,10 45,0 55,0"/>
                    <polygon points="70,15 75,5 65,10"/>
                    <polygon points="30,15 25,5 35,10"/>
                    <polygon points="75,30 85,25 80,35"/>
                    <polygon points="25,30 15,25 20,35"/>
                    <polygon points="70,45 80,50 75,40"/>
                    <polygon points="30,45 20,50 25,40"/>
                </g>
                <!-- Filament -->
                <path class="filament" d="M45 25 Q50 35 55 25" fill="none" stroke="currentColor" stroke-width="1"/>
            </g>
        </svg>
    </div>

    <div class="cursor" id="cursor"></div>
    <div class="scene" id="mainScene">
        <div class="eyes-container" id="eyesContainer"></div>
    </div>

    <script>
        const MIN_DISTANCE = 60;

        console.log('%cTHE TERMINATED ONE AWAITS YOU', 'color: red; font-size: 24px; font-weight: bold;');
        setTimeout(() => {
            console.log('%cDO YOU REALIZE WHERE YOU ARE RIGHT NOW?', 'color: red; font-size: 24px; font-weight: bold;');
        }, 2000);
        setTimeout(() => {
            console.log('%cWE AWAIT.', 'color: red; font-size: 24px; font-weight: bold;');
        }, 4000);

        function distance(x1, y1, x2, y2) {
            return Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2));
        }

        function getRandomPosition(existingPositions) {
            let attempts = 0;
            const maxAttempts = 50;
            
            while (attempts < maxAttempts) {
                const x = 10 + Math.random() * 80;
                const y = 10 + Math.random() * 80;
                const z = -300 + Math.random() * 600;
                
                let tooClose = false;
                for (const pos of existingPositions) {
                    const dist = distance(x, y, pos.x, pos.y);
                    if (dist < MIN_DISTANCE) {
                        tooClose = true;
                        break;
                    }
                }
                
                if (!tooClose || attempts === maxAttempts - 1) {
                    return {
                        x, y, z,
                        delay: Math.random() * 2,
                        scale: 0.8 + Math.random() * 0.4
                    };
                }
                
                attempts++;
            }
        }

        function startIndependentBlinking(eye) {
            const minInterval = 2000;
            const maxInterval = 8000;
            
            function blink() {
                eye.classList.add('blinking');
                
                setTimeout(() => {
                    eye.classList.remove('blinking');
                    setTimeout(blink, minInterval + Math.random() * (maxInterval - minInterval));
                }, 200);
            }
            
            setTimeout(blink, Math.random() * maxInterval);
        }

        function createEyePair(position) {
            const eyePair = document.createElement('div');
            eyePair.className = 'eye-pair';
            eyePair.style.left = `${position.x}%`;
            eyePair.style.top = `${position.y}%`;
            eyePair.style.transform = `translateZ(${position.z}px) scale(${position.scale})`;
            eyePair.style.animationDelay = `${position.delay}s`;
            
            const eye1 = document.createElement('div');
            const eye2 = document.createElement('div');
            eye1.className = 'eye';
            eye2.className = 'eye';
            
            eyePair.appendChild(eye1);
            eyePair.appendChild(eye2);

            startIndependentBlinking(eye1);
            startIndependentBlinking(eye2);

            eyePair.addEventListener('mouseenter', () => {
                cursor.classList.add('hover');
                console.log('%cI SEE YOU', 'color: red; font-size: 18px;');
            });

            eyePair.addEventListener('mouseleave', () => {
                cursor.classList.remove('hover');
            });

            return eyePair;
        }

        function toggleLight() {
            const body = document.body;
            const room = document.querySelector('.room');
            const scene = document.getElementById('mainScene');
            const lightbulb = document.getElementById('lightSwitch');
            
            body.classList.toggle('lit');
            room.classList.toggle('lit');
            lightbulb.classList.toggle('lit');
            scene.classList.toggle('hidden');

            if (!body.classList.contains('lit')) {
                console.log('%cTHEY RETURN', 'color: red; font-size: 24px; font-weight: bold;');
                setTimeout(() => {
                    initEyes();
                }, 500);
            } else {
                console.log('%cYOU CANNOT HIDE', 'color: red; font-size: 24px; font-weight: bold;');
                const container = document.getElementById('eyesContainer');
                container.innerHTML = '';
            }
        }

        function initEyes() {
            const container = document.getElementById('eyesContainer');
            const existingPositions = [];
            container.innerHTML = '';

            for (let i = 0; i < 15; i++) {
                const position = getRandomPosition(existingPositions);
                if (position) {
                    existingPositions.push(position);
                    const eyePair = createEyePair(position);
                    container.appendChild(eyePair);
                }
            }
        }

        function initScene() {
            const cursor = document.getElementById('cursor');
            const lightSwitch = document.getElementById('lightSwitch');
            lightSwitch.addEventListener('click', toggleLight);

            document.addEventListener('mousemove', (e) => {
                cursor.style.left = e.clientX + 'px';
                cursor.style.top = e.clientY + 'px';

                if (!document.body.classList.contains('lit')) {
                    const eyes = document.querySelectorAll('.eye-pair');
                    eyes.forEach(eyePair => {
                        const rect = eyePair.getBoundingClientRect();
                        const eyeCenterX = rect.left + rect.width / 2;
                        const eyeCenterY = rect.top + rect.height / 2;
                        
                        const angle = Math.atan2(e.clientY - eyeCenterY, e.clientX - eyeCenterX);
                        const rotation = angle * (180 / Math.PI);
                        
                       eyePair.style.transform += ` rotate(${rotation}deg)`;
                    });
                }
            });

            initEyes();
        }

        document.addEventListener('DOMContentLoaded', initScene);
    </script>
</body>
</html>
